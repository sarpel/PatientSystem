# Clinical AI Assistant - Production Environment Configuration
# Production-ready settings with security and performance optimizations

# ===========================================
# DATABASE CONFIGURATION
# ===========================================
DATABASE_URL=mssql+pyodbc://localhost\\HIZIR/TestDB?driver=ODBC+Driver+17+for+SQL+Server&trusted_connection=yes
DATABASE_POOL_SIZE=50
DATABASE_MAX_OVERFLOW=20
DATABASE_POOL_TIMEOUT=30
DATABASE_POOL_RECYCLE=3600
DATABASE_ECHO=false

# Database SSL/TLS
DATABASE_SSL_MODE=disable
DATABASE_SSL_CA=/etc/ssl/certs/ca-certificates.crt

# ===========================================
# AI SERVICE CONFIGURATION
# ===========================================
# Production AI API Keys (REQUIRED)
ANTHROPIC_API_KEY=${ANTHROPIC_API_KEY}
OPENAI_API_KEY=${OPENAI_API_KEY}
GOOGLE_API_KEY=${GOOGLE_API_KEY}

# Local AI Configuration
OLLAMA_BASE_URL=http://ollama:11434
OLLAMA_MODEL=gemma3:4b
OLLAMA_TIMEOUT=60

# AI Routing Strategy (optimized for production)
AI_ROUTING_STRATEGY=smart
AI_ENABLE_FALLBACK=true
AI_TIMEOUT=30
AI_TEMPERATURE=0.7
AI_MAX_TOKENS=2000

# AI Usage Limits
AI_REQUESTS_PER_HOUR=1000
AI_TOKENS_PER_DAY=100000

# ===========================================
# APPLICATION CONFIGURATION
# ===========================================
# Application Settings
DEBUG=false
LOG_LEVEL=INFO
ENVIRONMENT=production

# API Configuration
API_HOST=0.0.0.0
API_PORT=8000
API_WORKERS=4
API_RELOAD=false

# CORS Configuration (restrictive for production)
CORS_ORIGINS=["http://localhost:5173", "http://localhost:3000"]
CORS_ALLOW_CREDENTIALS=true
CORS_ALLOW_METHODS=["GET","POST","PUT","DELETE","OPTIONS"]
CORS_ALLOW_HEADERS=["Content-Type","Authorization","X-Requested-With"]

# ===========================================
# SECURITY CONFIGURATION
# ===========================================
# Session and Authentication
SECRET_KEY=${SECRET_KEY}  # Generate with: openssl rand -hex 32
SESSION_TIMEOUT=3600
COOKIE_SECURE=true
COOKIE_SAMESITE=strict
COOKIE_HTTPONLY=true

# Rate Limiting (strict for production)
RATE_LIMIT_REQUESTS=100
RATE_LIMIT_WINDOW=60

# SSL/TLS Configuration
SSL_ENABLED=true
SSL_CERT_PATH=/etc/ssl/certs/clinical-ai.crt
SSL_KEY_PATH=/etc/ssl/private/clinical-ai.key
SSL_PROTOCOLS=["TLSv1.2","TLSv1.3"]

# Security Headers
SECURITY_HEADERS_ENABLED=true
FRAME_OPTIONS=DENY
CONTENT_TYPE_OPTIONS=nosniff
XSS_PROTECTION=1; mode=block
HSTS_MAX_AGE=31536000

# ===========================================
# MONITORING AND LOGGING
# ===========================================
# Logging Configuration
LOG_FORMAT=json
LOG_FILE=/app/logs/clinical_ai_prod.log
LOG_MAX_SIZE=500MB
LOG_BACKUP_COUNT=30
LOG_ROTATION=daily

# Structured Logging
STRUCTURED_LOGGING=true
LOG_CORRELATION_ID=true

# Monitoring Settings
MONITORING_ENABLED=true
METRICS_ENABLED=true
METRICS_PORT=9090
HEALTH_CHECK_ENABLED=true
HEALTH_CHECK_INTERVAL=30

# Performance Monitoring
PERFORMANCE_MONITORING=true
SLOW_QUERY_THRESHOLD=1000
MEMORY_MONITORING=true

# ===========================================
# CACHE CONFIGURATION
# ===========================================
# Redis Configuration (Production)
REDIS_URL=redis://redis:6379/0
REDIS_PASSWORD=${REDIS_PASSWORD}
CACHE_TTL=300
CACHE_ENABLED=true
CACHE_MAX_MEMORY=256mb

# Cache Strategy
CACHE_STRATEGY=write-through
CACHE_RETRIES=3
CACHE_TIMEOUT=5

# ===========================================
# PERFORMANCE CONFIGURATION
# ===========================================
# Connection Limits
MAX_CONCURRENT_REQUESTS=1000
MAX_REQUESTS_PER_MINUTE=6000
REQUEST_TIMEOUT=60

# Async Configuration
ASYNC_POOL_SIZE=50
MAX_ASYNC_TASKS=200
ASYNC_QUEUE_SIZE=1000

# Resource Limits
MAX_MEMORY_USAGE=2GB
MAX_CPU_USAGE=80
GRACEFUL_SHUTDOWN_TIMEOUT=30

# ===========================================
# FRONTEND CONFIGURATION
# ===========================================
# Web Frontend Production
VITE_API_URL=https://api.your-domain.com
VITE_WS_URL=wss://api.your-domain.com/ws
VITE_DEBUG=false
VITE_BUILD_TARGET=production

# CDN Configuration
CDN_BASE_URL=https://cdn.your-domain.com
STATIC_ASSETS_URL=https://static.your-domain.com

# ===========================================
# BACKUP AND ARCHIVAL
# ===========================================
# Database Backup Settings
BACKUP_ENABLED=true
BACKUP_SCHEDULE=0 2 * * *  # Daily at 2 AM
BACKUP_RETENTION_DAYS=90
BACKUP_COMPRESSION=true
BACKUP_ENCRYPTION=true

# Log Archival
LOG_ARCHIVAL_ENABLED=true
LOG_ARCHIVE_RETENTION_DAYS=365
LOG_ARCHIVE_COMPRESSION=gzip

# ===========================================
# COMPLIANCE AND AUDIT
# ===========================================
# Audit Logging
AUDIT_LOG_ENABLED=true
AUDIT_LOG_RETENTION_MONTHS=84  # 7 years for medical data
AUDIT_LOG_PATH=/app/logs/audit.log

# Data Protection
DATA_ENCRYPTION_AT_REST=true
DATA_ENCRYPTION_KEY=${DATA_ENCRYPTION_KEY}
ANONYMIZATION_ENABLED=false
GDPR_COMPLIANCE=true

# HIPAA Compliance
HIPAA_AUDIT_LOG=true
HIPAA_ACCESS_LOG=true
HIPAA_ENCRYPTION=true

# ===========================================
# HIGH AVAILABILITY
# ===========================================
# Load Balancing
LOAD_BALANCER_ENABLED=true
HEALTH_CHECK_ENDPOINT=/health
READINESS_CHECK_ENDPOINT=/ready
LIVENESS_CHECK_ENDPOINT=/alive

# Failover Configuration
FAILOVER_ENABLED=true
FAILOVER_TIMEOUT=30
FAILOVER_RETRIES=3

# ===========================================
# NOTIFICATIONS AND ALERTS
# ===========================================
# Email Configuration
SMTP_HOST=smtp.your-domain.com
SMTP_PORT=587
SMTP_USERNAME=${SMTP_USERNAME}
SMTP_PASSWORD=${SMTP_PASSWORD}
SMTP_TLS=true

# Alert Configuration
ALERT_EMAIL_ENABLED=true
ALERT_EMAIL_RECIPIENTS=["admin@your-domain.com","ops@your-domain.com"]
ALERT_SLACK_WEBHOOK=${SLACK_WEBHOOK_URL}

# System Alerts
CPU_USAGE_ALERT_THRESHOLD=80
MEMORY_USAGE_ALERT_THRESHOLD=85
DISK_USAGE_ALERT_THRESHOLD=90
ERROR_RATE_ALERT_THRESHOLD=5

# ===========================================
# EXTERNAL INTEGRATIONS
# ===========================================
# External Service URLs
EXTERNAL_API_BASE_URL=https://external-service.your-domain.com
NOTIFICATION_SERVICE_URL=https://notifications.your-domain.com

# Integration Settings
EXTERNAL_SERVICE_TIMEOUT=30
EXTERNAL_SERVICE_RETRIES=3
EXTERNAL_SERVICE_ENABLED=true
EXTERNAL_SERVICE_API_KEY=${EXTERNAL_API_KEY}

# ===========================================
# COMPLIANCE AND LEGAL
# ===========================================
# Terms of Service and Privacy
TOS_VERSION=1.0
PRIVACY_POLICY_VERSION=1.0
COOKIE_CONSENT_REQUIRED=true

# Legal Settings
JURISDICTION=TR
DATA_PROCESSING_AGREEMENT=true
USER_CONSENT_REQUIRED=true